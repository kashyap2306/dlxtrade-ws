[debug] [2025-11-16T08:28:16.089Z] ----------------------------------------------------------------------
[debug] [2025-11-16T08:28:16.095Z] Command:       C:\nvm4w\nodejs\node.exe C:\Users\Manish\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions --project dlx-trading
[debug] [2025-11-16T08:28:16.096Z] CLI Version:   14.18.0
[debug] [2025-11-16T08:28:16.096Z] Platform:      win32
[debug] [2025-11-16T08:28:16.096Z] Node Version:  v20.11.1
[debug] [2025-11-16T08:28:16.097Z] Time:          Sun Nov 16 2025 13:58:16 GMT+0530 (India Standard Time)
[debug] [2025-11-16T08:28:16.097Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-11-16T08:28:16.683Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-16T08:28:16.684Z] > authorizing via signed-in user (mrdev2386@gmail.com)
[debug] [2025-11-16T08:28:16.684Z] [iam] checking project dlx-trading for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-11-16T08:28:16.687Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:16.688Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:16.691Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading:testIamPermissions [none]
[debug] [2025-11-16T08:28:16.692Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading:testIamPermissions x-goog-quota-user=projects/dlx-trading
[debug] [2025-11-16T08:28:16.692Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-11-16T08:28:18.565Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading:testIamPermissions 200
[debug] [2025-11-16T08:28:18.566Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-11-16T08:28:18.567Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:18.568Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:18.568Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/dlx-trading/serviceAccounts/dlx-trading@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-11-16T08:28:18.568Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/dlx-trading/serviceAccounts/dlx-trading@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-11-16T08:28:20.484Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/dlx-trading/serviceAccounts/dlx-trading@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-11-16T08:28:20.484Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/dlx-trading/serviceAccounts/dlx-trading@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'dlx-trading'...
[info] 
[info] i  deploying functions 
[debug] [2025-11-16T08:28:20.493Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:20.493Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:20.494Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading [none]
[debug] [2025-11-16T08:28:20.939Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading 200
[debug] [2025-11-16T08:28:20.939Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading {"projectNumber":"561570439242","projectId":"dlx-trading","lifecycleState":"ACTIVE","name":"DLX TRADING","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-11-14T13:00:35.465626Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-11-16T08:28:20.947Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:20.947Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:20.947Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/dlx-trading/adminSdkConfig [none]
[debug] [2025-11-16T08:28:21.830Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/dlx-trading/adminSdkConfig 200
[debug] [2025-11-16T08:28:21.830Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/dlx-trading/adminSdkConfig {"projectId":"dlx-trading","storageBucket":"dlx-trading.firebasestorage.app"}
[debug] [2025-11-16T08:28:21.832Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:21.832Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:21.833Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/dlx-trading/configs [none]
[debug] [2025-11-16T08:28:22.561Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/dlx-trading/configs 200
[debug] [2025-11-16T08:28:22.562Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/dlx-trading/configs {}
[debug] [2025-11-16T08:28:22.565Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-11-16T08:28:25.959Z] > [functions] package.json contents: {
  "name": "dlxtrade-backend",
  "version": "1.0.0",
  "description": "DLXTRADE Backend API",
  "main": "dist/index.js",
  "engines": {
    "node": ">=20"
  },
  "scripts": {
    "dev": "ts-node-dev --respawn --transpile-only src/server.ts",
    "build": "tsc || echo \"TypeScript errors ignored for build emission\"",
    "start": "node dist/server.js",
    "test": "jest",
    "lint": "eslint src --ext .ts",
    "typecheck": "tsc --noEmit",
    "migrate": "node -r ts-node/register src/db/migrate.ts",
    "init:firestore": "node dist/scripts/initFirestore.js",
    "seed:firestore": "ts-node src/scripts/seedFirestore.ts",
    "check:system": "ts-node src/scripts/checkSystem.ts",
    "archive:demo-users": "ts-node src/scripts/archiveDemoUsers.ts",
    "backfill:auth-users": "ts-node src/scripts/backfillAuthUsers.ts"
  },
  "dependencies": {
    "@fastify/cors": "^9.0.1",
    "@fastify/helmet": "^11.1.1",
    "@fastify/jwt": "^7.2.4",
    "@fastify/rate-limit": "^9.1.0",
    "@fastify/websocket": "^8.3.0",
    "axios": "^1.6.7",
    "bcrypt": "^5.1.1",
    "crypto": "^1.0.1",
    "dlxtrade": "file:..",
    "dotenv": "^16.4.1",
    "fastify": "^4.26.2",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.1.0",
    "ioredis": "^5.3.2",
    "pg": "^8.11.3",
    "pino": "^9.2.0",
    "pino-pretty": "^10.3.1",
    "uuid": "^9.0.1",
    "ws": "^8.16.0",
    "zod": "^3.22.4"
  },
  "devDependencies": {
    "@types/bcrypt": "^5.0.2",
    "@types/node": "^20.11.24",
    "@types/pg": "^8.10.9",
    "@types/uuid": "^9.0.7",
    "@types/ws": "^8.5.10",
    "@typescript-eslint/eslint-plugin": "^7.1.0",
    "@typescript-eslint/parser": "^7.1.0",
    "eslint": "^8.57.0",
    "jest": "^29.7.0",
    "prettier": "^3.2.5",
    "ts-jest": "^29.1.2",
    "ts-node-dev": "^2.0.0",
    "typescript": "^5.4.2"
  }
}
[debug] [2025-11-16T08:28:25.959Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-11-16T08:28:25.966Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-11-16T08:28:25.986Z] Found firebase-functions binary at 'c:\Users\yash\dlxtrade\backend\node_modules\.bin\firebase-functions'
[info] Serving at port 8108

[debug] [2025-11-16T08:28:29.269Z] Got response from /__/functions.yaml {"endpoints":{"api":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-11-16T08:28:34.356Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-16T08:28:34.357Z] > authorizing via signed-in user (mrdev2386@gmail.com)
[debug] [2025-11-16T08:28:34.357Z] [iam] checking project dlx-trading for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-11-16T08:28:34.358Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:34.358Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:34.358Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading:testIamPermissions [none]
[debug] [2025-11-16T08:28:34.359Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading:testIamPermissions x-goog-quota-user=projects/dlx-trading
[debug] [2025-11-16T08:28:34.359Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-11-16T08:28:36.060Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading:testIamPermissions 200
[debug] [2025-11-16T08:28:36.060Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-11-16T08:28:36.062Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:36.063Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:36.066Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/dlx-trading/instances pageSize=100&pageToken=
[debug] [2025-11-16T08:28:37.932Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/dlx-trading/instances 200
[debug] [2025-11-16T08:28:37.932Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/dlx-trading/instances {}
[info] i  functions: preparing backend directory for uploading... 
[info] i  functions: packaged c:\Users\yash\dlxtrade\backend (534.94 KB) for uploading 
[debug] [2025-11-16T08:28:39.247Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:39.248Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:39.248Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/-/functions [none]
[debug] [2025-11-16T08:28:40.244Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/-/functions 200
[debug] [2025-11-16T08:28:40.244Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/-/functions {"functions":[{"name":"projects/dlx-trading/locations/us-central1/functions/api","httpsTrigger":{"url":"https://us-central1-dlx-trading.cloudfunctions.net/api","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"api","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"dlx-trading@appspot.gserviceaccount.com","updateTime":"2025-11-16T06:46:16.910352867Z","versionId":"1","labels":{"firebase-functions-hash":"efe112955ddc1d9bd24e25d2fb04c2a69a678fe4","deployment-tool":"cli-firebase"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-146985444331.us-central1.cloudfunctions.appspot.com/ca35baf2-f3a1-483f-ba21-329765c51a38.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"dlx-trading\",\"storageBucket\":\"dlx-trading.firebasestorage.app\"}","GCLOUD_PROJECT":"dlx-trading","EVENTARC_CLOUD_EVENT_SOURCE":"projects/dlx-trading/locations/us-central1/functions/api"},"runtime":"nodejs22","ingressSettings":"ALLOW_ALL","buildId":"5a58a190-85d7-4252-912a-93b03d80627b","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/561570439242/locations/us-central1/builds/5a58a190-85d7-4252-912a-93b03d80627b","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/dlx-trading/serviceAccounts/561570439242-compute@developer.gserviceaccount.com","satisfiesPzi":true}]}
[debug] [2025-11-16T08:28:40.247Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:40.247Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:40.249Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/dlx-trading/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-11-16T08:28:41.937Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/dlx-trading/locations/-/functions 200
[debug] [2025-11-16T08:28:41.938Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/dlx-trading/locations/-/functions {}
[debug] [2025-11-16T08:28:41.955Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:41.956Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:41.956Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading [none]
[debug] [2025-11-16T08:28:43.716Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading 200
[debug] [2025-11-16T08:28:43.717Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/dlx-trading {"projectNumber":"561570439242","projectId":"dlx-trading","lifecycleState":"ACTIVE","name":"DLX TRADING","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-11-14T13:00:35.465626Z"}
[debug] [2025-11-16T08:28:43.723Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:43.724Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:43.725Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/dlx-trading/billingInfo [none]
[debug] [2025-11-16T08:28:45.507Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/dlx-trading/billingInfo 200
[debug] [2025-11-16T08:28:45.507Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/dlx-trading/billingInfo {"name":"projects/dlx-trading/billingInfo","projectId":"dlx-trading","billingAccountName":"billingAccounts/0109E3-19A916-E1CFB2","billingEnabled":true}
[debug] [2025-11-16T08:28:45.511Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:45.511Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:45.512Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-11-16T08:28:45.512Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/us-central1/functions:generateUploadUrl {}
[debug] [2025-11-16T08:28:46.517Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-11-16T08:28:46.518Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-146985444331.us-central1.cloudfunctions.appspot.com/4a6ce78b-67a9-43e0-b45d-34c708af5320.zip?GoogleAccessId=service-561570439242@gcf-admin-robot.iam.gserviceaccount.com&Expires=1763283526&Signature=Sw%2BiGoS0pg3Mz6kiE86zz8ZXBBlhr88B77SsS7LVPPXDLTDXcQq3yRG%2BGSQvxrK2INq0OcTxs0jxPzwke4gX%2FzffwNqeOnrdzHVp1m%2B6ZioZt1%2F8R5ZUo%2FBzJirCv2%2FGi9SipHybiHWU1OqOz7IZBauj4ilVVnbx5zdcU%2Fu8N%2B2j7YCzQxqvn3VCsfsqxIR2z5Co27De4b8ZHsibQ7N3sEFDP19Hx%2BzHH0cIxXHw98wgleYubFmDhp%2BhlPBc34sxID8GNEov1Ur82l2LGMy0V5D5DhS2DGJ2jgFaj85crBtAbmihfEcYg%2Bru6BX%2BKue96QbARRC%2FkevxWTCC9GrkVA%3D%3D"}
[debug] [2025-11-16T08:28:46.526Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-146985444331.us-central1.cloudfunctions.appspot.com/4a6ce78b-67a9-43e0-b45d-34c708af5320.zip GoogleAccessId=service-561570439242%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1763283526&Signature=Sw%2BiGoS0pg3Mz6kiE86zz8ZXBBlhr88B77SsS7LVPPXDLTDXcQq3yRG%2BGSQvxrK2INq0OcTxs0jxPzwke4gX%2FzffwNqeOnrdzHVp1m%2B6ZioZt1%2F8R5ZUo%2FBzJirCv2%2FGi9SipHybiHWU1OqOz7IZBauj4ilVVnbx5zdcU%2Fu8N%2B2j7YCzQxqvn3VCsfsqxIR2z5Co27De4b8ZHsibQ7N3sEFDP19Hx%2BzHH0cIxXHw98wgleYubFmDhp%2BhlPBc34sxID8GNEov1Ur82l2LGMy0V5D5DhS2DGJ2jgFaj85crBtAbmihfEcYg%2Bru6BX%2BKue96QbARRC%2FkevxWTCC9GrkVA%3D%3D
[debug] [2025-11-16T08:28:46.527Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-146985444331.us-central1.cloudfunctions.appspot.com/4a6ce78b-67a9-43e0-b45d-34c708af5320.zip [stream]
[debug] [2025-11-16T08:28:49.384Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-146985444331.us-central1.cloudfunctions.appspot.com/4a6ce78b-67a9-43e0-b45d-34c708af5320.zip 200
[debug] [2025-11-16T08:28:49.384Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-146985444331.us-central1.cloudfunctions.appspot.com/4a6ce78b-67a9-43e0-b45d-34c708af5320.zip [omitted]
[info] +  functions: backend source uploaded successfully 
[info] i  functions: updating Node.js 20 (1st Gen) function api(us-central1)... 
[debug] [2025-11-16T08:28:49.400Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:49.401Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:49.401Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/us-central1/functions/api updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables
[debug] [2025-11-16T08:28:49.401Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/us-central1/functions/api {"name":"projects/dlx-trading/locations/us-central1/functions/api","sourceUploadUrl":"https://storage.googleapis.com/uploads-146985444331.us-central1.cloudfunctions.appspot.com/4a6ce78b-67a9-43e0-b45d-34c708af5320.zip?GoogleAccessId=service-561570439242@gcf-admin-robot.iam.gserviceaccount.com&Expires=1763283526&Signature=Sw%2BiGoS0pg3Mz6kiE86zz8ZXBBlhr88B77SsS7LVPPXDLTDXcQq3yRG%2BGSQvxrK2INq0OcTxs0jxPzwke4gX%2FzffwNqeOnrdzHVp1m%2B6ZioZt1%2F8R5ZUo%2FBzJirCv2%2FGi9SipHybiHWU1OqOz7IZBauj4ilVVnbx5zdcU%2Fu8N%2B2j7YCzQxqvn3VCsfsqxIR2z5Co27De4b8ZHsibQ7N3sEFDP19Hx%2BzHH0cIxXHw98wgleYubFmDhp%2BhlPBc34sxID8GNEov1Ur82l2LGMy0V5D5DhS2DGJ2jgFaj85crBtAbmihfEcYg%2Bru6BX%2BKue96QbARRC%2FkevxWTCC9GrkVA%3D%3D","entryPoint":"api","runtime":"nodejs20","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"9397fec5de450c2aedefefa7474471bf51be04f7"},"httpsTrigger":{"securityLevel":"SECURE_ALWAYS"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"dlx-trading\",\"storageBucket\":\"dlx-trading.firebasestorage.app\"}","GCLOUD_PROJECT":"dlx-trading","EVENTARC_CLOUD_EVENT_SOURCE":"projects/dlx-trading/locations/us-central1/functions/api"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2025-11-16T08:28:50.207Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/us-central1/functions/api 400
[debug] [2025-11-16T08:28:50.208Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/us-central1/functions/api {"error":{"code":400,"message":"An operation on function api in region us-central1 in project dlx-trading is already in progress. Please try again later.","status":"FAILED_PRECONDITION"}}
[warn] !  functions: failed to update function projects/dlx-trading/locations/us-central1/functions/api 
[error] Failed to update function projects/dlx-trading/locations/us-central1/functions/api
[debug] [2025-11-16T08:28:50.240Z] Total Function Deployment time: 824
[debug] [2025-11-16T08:28:50.241Z] 1 Functions Deployed
[debug] [2025-11-16T08:28:50.241Z] 1 Functions Errored
[debug] [2025-11-16T08:28:50.241Z] 0 Function Deployments Aborted
[debug] [2025-11-16T08:28:50.241Z] Average Function Deployment time: 821
[info] 
[info] Functions deploy had errors with the following functions:
	api(us-central1)
[debug] [2025-11-16T08:28:50.610Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[debug] [2025-11-16T08:28:50.612Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:50.613Z] Checked if tokens are valid: true, expires at: 1763282890349
[debug] [2025-11-16T08:28:50.613Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/dlx-trading/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-11-16T08:28:52.335Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/dlx-trading/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-11-16T08:28:52.337Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/dlx-trading/locations/us-central1/repositories/gcf-artifacts {"name":"projects/dlx-trading/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-11-16T06:44:47.388571Z","updateTime":"2025-11-16T06:46:25.234064Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"531085853","vulnerabilityScanningConfig":{"lastEnableTime":"2025-11-16T06:44:37.797181195Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/dlx-trading/gcf-artifacts"}
[debug] [2025-11-16T08:28:52.338Z] Functions deploy failed.
[debug] [2025-11-16T08:28:52.339Z] {
  "endpoint": {
    "id": "api",
    "project": "dlx-trading",
    "region": "us-central1",
    "entryPoint": "api",
    "platform": "gcfv1",
    "runtime": "nodejs20",
    "httpsTrigger": {},
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"dlx-trading\",\"storageBucket\":\"dlx-trading.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "dlx-trading",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/dlx-trading/locations/us-central1/functions/api"
    },
    "codebase": "default",
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "9397fec5de450c2aedefefa7474471bf51be04f7",
    "labels": {
      "deployment-tool": "cli-firebase"
    }
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "context": {
      "function": "projects/dlx-trading/locations/us-central1/functions/api"
    },
    "exit": 1,
    "message": "Failed to update function projects/dlx-trading/locations/us-central1/functions/api",
    "original": {
      "name": "FirebaseError",
      "children": [],
      "context": {
        "body": {
          "error": {
            "code": 400,
            "message": "An operation on function api in region us-central1 in project dlx-trading is already in progress. Please try again later.",
            "status": "FAILED_PRECONDITION"
          }
        },
        "response": {
          "statusCode": 400
        }
      },
      "exit": 1,
      "message": "Request to https://cloudfunctions.googleapis.com/v1/projects/dlx-trading/locations/us-central1/functions/api?updateMask=name%2CsourceUploadUrl%2CentryPoint%2Cruntime%2CdockerRegistry%2Clabels%2ChttpsTrigger.securityLevel%2CminInstances%2CmaxInstances%2CingressSettings%2CenvironmentVariables%2CserviceAccountEmail%2CavailableMemoryMb%2Ctimeout%2CvpcConnector%2CvpcConnectorEgressSettings%2CsourceToken%2CbuildEnvironmentVariables had HTTP Error: 400, An operation on function api in region us-central1 in project dlx-trading is already in progress. Please try again later.",
      "status": 400
    },
    "status": 400,
    "code": 400
  }
}
[debug] [2025-11-16T08:28:52.490Z] Error: Failed to update function api in region us-central1
    at C:\Users\Manish\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:52:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV1Function (C:\Users\Manish\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:364:32)
    at async Fabricator.updateEndpoint (C:\Users\Manish\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:157:13)
    at async handle (C:\Users\Manish\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
